import{r as a,d as r,s as fe,e as me,f as ge,h as xe,i as Se,k as Ce,l as be,n as ve,o as ke,p as Ne,q as ye,u as we,v as je,w as Ee,y as Pe,z as Ie,b as Ae,a as Be,B as y,D as F,E as g,F as C,A as G,j as t,C as Me,m as J,I as Ue,J as Te,L as x,Q as ze,T as Le,M as De,N as Re}from"./index-c7sYi7Kz.js";import{M as w,a as j,B as E,I as P,b as I,c as A,g as $e}from"./style-BxNb0MSm.js";import{R as We}from"./index-C0cNSHUL.js";import"./call-all-BVW9KC9I.js";const Ze=()=>{var $;const[B,f]=a.useState(""),d=r(fe);r(me);const q=r(ge),K=r(xe),i=r(Se),O=r(Ce),M=r(be),[b,Q]=a.useState(!1),V=r(ve),[_e,U]=a.useState(!1),[l,v]=a.useState(0),h=r(ke),[k,S]=a.useState(!0),c=a.useRef(null),N=r(Ne);r(ye),we();const[Y,Z]=a.useState(!1);a.useState(0);const T=r(je),m=r(Ee),{user:H}=r(e=>e.auth),X=r(Pe),ee=r(Ie),[Fe,se]=a.useState(!1),[Ge,te]=a.useState(!1),o=Ae(),z=Be();a.useState(!1);const[Je,oe]=a.useState(""),[L,qe]=a.useState("");a.useState("");const[D,Ke]=a.useState({type:"monthly",price:4,index:0});a.useEffect(()=>{We.send({hitType:"pageview",page:z.pathname})},[z]),a.useEffect(()=>{c.current&&(c.current.defaultPlaybackRate=T,c.current.load())},[c.current,T]),a.useEffect(()=>{const e=setInterval(()=>{},8e3);return()=>clearInterval(e)},[]);const ae=e=>{Z(!1),e&&J(L,D.type)};a.useEffect(()=>{c.current&&(b?c.current.pause():c.current.play())},[c.current,b]);const ne=()=>X==="Male"?{languageCode:"en-US",name:"en-US-Casual-K",ssmlGender:"MALE"}:{languageCode:"en-US",name:"en-US-Journey-F",ssmlGender:"FEMALE"},R=async e=>{const s=await $e(e,ne());f(s)},re=e=>M.indexOf(e)>4,le=async()=>{o(x(!0));try{const e=await Le();if(!e||!Array.isArray(e)||e.length===0)throw new Error("Book data is not in the expected format.");o(De(e));const s=e.map(p=>p.chapterName);o(Re(s));const n=e.slice(0,4),u=[];n.forEach(p=>{const pe=p.scenes.slice(0,3).map((_,he)=>({sceneNumber:_.sceneNumber,description:_.description||"",disabled:he>=3}));u.push({chapterName:p.chapterName,plots:pe})}),o(y(u));const W=e.find(p=>p.chapterName==="Unlearn");if(W){const p=W.scenes[0];o(g(p)),o(C(0))}else console.error("'Unlearn' chapter not found in the book data.");o(x(!1))}catch(e){console.error("Error in fetching book:",e),o(x(!1))}},ce=async()=>{try{o(x(!0)),le()}catch(e){console.log(e)}finally{o(x(!1))}};a.useEffect(()=>{if(d!=null&&d.length){S(!1);return}else ce()},[H]),a.useEffect(()=>{h.length?R(h[l]):f("")},[h]),a.useEffect(()=>{const e=d.find(s=>s.chapterName==="Unlearn");e?(o(y(e.scenes)),o(F("Unlearn")),o(g(e.scenes[0])),o(C(0))):console.error("'Unlearn' chapter not found.")},[d,o]),a.useEffect(()=>{var e;i&&(f(""),v(0),o(G((e=i==null?void 0:i.description)==null?void 0:e.split("."))))},[i]),a.useEffect(()=>{l&&l<h.length&&(f(""),R(h[l])),l&&l>=h.length&&(o(g(d[0].scenes[V+1])),o(C(e=>e+1)),f(""))},[l]);const ie=async e=>{se(!1),te(!1),v(0);const s=d.find(n=>n.chapterName===e);if(s){o(F(e)),o(y(s.scenes));const n=s.scenes[0];o(g(n)),o(C(0))}else console.error(`Chapter "${e}" not found in book data.`)},ue=e=>{f(""),o(ze(e));const s=d.find(u=>u.chapterName===N);let n="";n=(s==null?void 0:s.wots)||"",e==="Epilogue"&&(n=(s==null?void 0:s.epilogue)||""),o(G(n==null?void 0:n.split(".")))},de=()=>m?m===25?"8px":m===50?"12px":m===100?"15px":m===150?"18px":"20px":"15px";return t.jsxs(t.Fragment,{children:[Y&&t.jsx(Me,{setShowCookie:e=>ae(e),onAgree:()=>J(L,D.type)}),B&&!k&&t.jsxs("audio",{controls:!0,autoPlay:!0,style:{display:"none"},ref:c,onEnded:()=>v(l+1),children:[t.jsx("source",{src:B,type:"audio/mp3"}),"Your browser does not support the audio element."]}),t.jsx("div",{id:"play-button",onClick:()=>{Q(!b),S(!1),U(!0)},children:t.jsx("img",{src:($=c.current)!=null&&$.paused?"./images/pause-large.svg":"./images/play-large.svg",alt:"",className:"play-icon"})}),t.jsxs("section",{className:"mid-section",children:[t.jsxs("div",{className:"row align-items-center",style:{padding:"16px 0px"},children:[t.jsx("div",{className:"col-5",children:t.jsxs(w,{children:[t.jsx(j,{as:E,rightIcon:t.jsx(P,{color:"#737373",fontSize:"16px"}),h:"28px",fontSize:"15px",backgroundColor:"#292929",width:"100%",padding:"4px",_hover:{backgroundColor:"#292929"},_active:{backgroundColor:"#292929"},fontWeight:"400",overflow:"hidden",className:"menu-button",children:k?"The Book":N||"Unlearn"}),t.jsx(I,{className:"menu-list",children:M.map((e,s)=>{const n=re(e);return t.jsx(A,{onClick:()=>{n?oe("To continue, please log in or subscribe to unlock your inner STAR and begin your Self-transcendence journey."):ie(e)},className:`menu-list-item ${N===e?"menu-list-item-active":""}`,disabled:n,style:{color:n?"#aaa":"inherit",cursor:n?"not-allowed":"pointer"},children:e},s)})})]})}),t.jsx("div",{className:"col-3",children:t.jsxs(w,{children:[t.jsx(j,{as:E,rightIcon:t.jsx(P,{color:"#737373",fontSize:"16px"}),h:"28px",fontSize:"15px",backgroundColor:"#292929",width:"100%",padding:"4px",_hover:{backgroundColor:"#292929"},_active:{backgroundColor:"#292929"},fontWeight:"400",overflow:"hidden",className:"menu-button",children:i!=null&&i.sceneNumber?`Plot ${i.sceneNumber}`:"Select Plot"}),t.jsx(I,{className:"menu-list",children:(O||[]).map((e,s)=>{const n=(e==null?void 0:e.sceneNumber)??"Not Available",u=s>=3;return t.jsx(A,{onClick:()=>{u||(S(!1),o(g(e)),o(Ue(s)))},className:`menu-list-item ${q===s?"menu-list-item-active":""}`,style:{color:u?"gray":"inherit",cursor:u?"not-allowed":"pointer"},children:n!=="Not Available"?`Plot ${n}`:"Plot Unavailable"},s)})})]})}),t.jsx("div",{className:"col-4",children:t.jsxs(w,{children:[t.jsx(j,{as:E,rightIcon:t.jsx(P,{color:"#737373",fontSize:"16px"}),h:"28px",fontSize:"15px",backgroundColor:"#292929",width:"100%",padding:"4px",_hover:{backgroundColor:"#292929"},_active:{backgroundColor:"#292929"},fontWeight:"400",overflow:"hidden",className:"menu-button",children:"Select"}),t.jsx(I,{className:"menu-list",children:["Whispers of soul-I","Epilogue"].map((e,s)=>t.jsx(A,{className:`menu-list-item ${K===s?"menu-list-item-active":""}`,onClick:()=>{ue(`${e}`),o(Te(s)),S(!1),U(!1)},children:e},s))})]})})]}),t.jsx("p",{style:{marginBottom:"50%",fontSize:de(),whiteSpace:"pre-line",marginTop:"15px"},className:"book-text",children:k?t.jsx("img",{src:"./images/cover.jpg",className:"w-100",alt:"Book Cover"}):h.map((e,s)=>t.jsxs("span",{style:{backgroundColor:s===l?ee?"#708090":"rgb(237, 242, 247)":"transparent",display:s===l?"inline-block":"inline"},children:[e,"."]},s))})]})]})};export{Ze as default};
