var W=Object.defineProperty;var J=(t,s,n)=>s in t?W(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var N=(t,s,n)=>J(t,typeof s!="symbol"?s+"":s,n);import{S as O,j as e,r,u as Q,d as Y}from"./index-c7sYi7Kz.js";import{B as h,d as B,P as K}from"./Play30-Ca2U78eH.js";class U extends O.Component{constructor(){super(...arguments);N(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return console.error("ErrorBoundary caught an error:",n),{hasError:!0,error:n}}render(){return this.state.hasError?e.jsxs("div",{className:"text-center text-dark p-4",children:[e.jsx("h2",{children:"Something went wrong!"}),e.jsx("p",{children:"Please refresh the page or try again later."}),e.jsx(h,{variant:"primary",onClick:()=>window.location.reload(),children:"Refresh"})]}):this.props.children}}const X=t=>{const s=t.slice();for(let n=s.length-1;n>0;n--){const m=Math.floor(Math.random()*(n+1));[s[n],s[m]]=[s[m],s[n]]}return s},v=(t,s)=>console.log(`Tracking event: ${t}, ${JSON.stringify(s)}`),_=()=>{var E;const[t,s]=r.useState(0),[n,m]=r.useState([]),[C,b]=r.useState(!1),[L,F]=r.useState(""),[P,x]=r.useState(!1),[f,Z]=r.useState(0),[k,A]=r.useState(0),[p,G]=r.useState(!1),[R,w]=r.useState(""),[c,$]=r.useState([]),g=r.useRef(null),H=Q(),I=r.useRef(0),{user:y}=Y(o=>o.auth),j=!!y,i=((E=y==null?void 0:y.customerType)==null?void 0:E.toLowerCase())||"reader";r.useEffect(()=>{I.current+=1,console.log(`Level4Game Render Count: ${I.current}, userType: ${i}, gameEnabled: ${p}, currentQuestionIndex: ${t}, win: ${n.length===d.length}`)});const d=[{question:"Heart ➝ Love ➝ Compassion ➝ Gratitude ➝ ?",options:["Service","Radiance","Oneness","Presence"],correct:"Radiance",correctMessage:"Gratitude ignites the spark of Radiance.",incorrectMessage:"Try again! Gratitude hides shy — Radiance glows bold."},{question:"Mind ➝ Clarity ➝ Curiosity ➝ Patience ➝ ?",options:["Presence","Oneness","Service","Radiance"],correct:"Presence",correctMessage:"Patience weaves the thread of Presence.",incorrectMessage:"Try again! Patience drifts far — Presence roots deep."},{question:"Body ➝ Joy ➝ Creativity ➝ Trust ➝ ?",options:["Service","Radiance","Presence","Oneness"],correct:"Service",correctMessage:"Trust builds the bridge to Service.",incorrectMessage:"Try again! Trust hesitates — Service anchors steady."},{question:"Soul ➝ Peace ➝ Wisdom ➝ Supplication ➝ ?",options:["Service","Radiance","Presence","Oneness"],correct:"Oneness",correctMessage:"Supplication opens the door to Oneness.",incorrectMessage:"Try again! Supplication fades dim — Oneness blooms bright."}],V=n.length===d.length;r.useEffect(()=>{const o=d[t].options,a=X(o);$(a)},[t]),r.useEffect(()=>{if(f===k)return;const o=Math.ceil((f-k)/10),a=setInterval(()=>{A(u=>{const l=u+o;return l>=f?(clearInterval(a),f):l})},50);return()=>clearInterval(a)},[f,k]),r.useEffect(()=>{if(V&&g.current){const o=B.create(g.current,{resize:!0,useWorker:!0}),u=Date.now()+5e3,l=["#FF4500","#00FF00","#1E90FF"],M=()=>{o({particleCount:5,angle:60,spread:55,origin:{x:0,y:.6},colors:l}),o({particleCount:5,angle:120,spread:55,origin:{x:1,y:.6},colors:l}),Date.now()<u&&requestAnimationFrame(M)};M()}},[V]);const z=()=>{console.log("handleJoinClick: isLoggedIn=",j,"userType=",i),j?i==="star"?(G(!0),v("Level4Game-Join-Click",{isLoggedIn:!0,userType:i,gameEnabled:!0})):(w("Only STAR users can play this game. Please upgrade your account."),v("Level4Game-Join-Click",{isLoggedIn:!0,userType:i,error:"Non-STAR user attempted to play"})):(H("/"),v("Level4Game-Join-Click",{isLoggedIn:!1}))},S=o=>{if(!j||i!=="star"||!p){console.log("handleOptionClick: Blocked - isLoggedIn=",j,"userType=",i,"gameEnabled=",p),w("Only STAR users can play this game. Please upgrade your account.");return}console.log("handleOptionClick: selected=",o);const a=d[t];if(o===a.correct){if(m([...n,a]),Z(l=>l+100),F(a.correctMessage),x(!0),b(!1),setTimeout(()=>x(!1),2500),g.current){const l=B.create(g.current,{resize:!0,useWorker:!0}),D=Date.now()+2e3,q=["#FF4500","#00FF00","#1E90FF"],T=()=>{l({particleCount:5,spread:70,origin:{x:.5,y:.5},colors:q,ticks:200}),Date.now()<D&&requestAnimationFrame(T)};T()}const u=t+1;u<d.length?s(u):(console.log("handleOptionClick: Game completed, navigating to /profile"),v("Level4Game-Completed",{userType:i,score:f}),w(""),H("/unlock-star"))}else b(!0),F(a.incorrectMessage),x(!0),setTimeout(()=>{b(!1),x(!1)},2e3)};return e.jsxs(U,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("canvas",{ref:g,className:"confetti-canvas"}),e.jsx("div",{className:"gaming-border",style:{marginBottom:"30px"},children:e.jsxs("div",{className:"purple-card",children:[e.jsx("img",{src:K,style:{width:"30%",height:"30%",position:"absolute",left:"-7%",top:"-10%"}}),V?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"animate-top",children:[e.jsxs("h2",{style:{fontSize:"1rem",color:"white",fontFamily:"'Aboreto', sans-serif"},children:["Question ",t+1," of ",d.length]}),e.jsx("div",{className:"mt-2 text-white",style:{padding:"40px",fontSize:"1.5rem",fontFamily:"'Aboreto', sans-serif",fontWeight:"600"},children:d[t].question})]})},t),e.jsx("div",{className:"options-container",style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"20px",marginBottom:"20px"},children:p&&i==="star"?e.jsxs(e.Fragment,{children:[e.jsx(h,{id:"option1",variant:"light",className:`option-button ${C?"shake":""}`,onClick:()=>S(c[0]),style:{fontWeight:"600",width:"45%",padding:"40px",fontSize:"20px",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"'Spectral SC', serif",backgroundColor:"#e5e5e5",border:"4px solid #ffcc00"},children:c[0]}),e.jsx(h,{id:"option2",variant:"light",className:`option-button ${C?"shake":""}`,onClick:()=>S(c[1]),style:{width:"45%",padding:"40px",fontSize:"20px",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"'Spectral SC', serif",backgroundColor:"#e5e5e5",border:"4px solid #ffcc00"},children:c[1]}),e.jsx(h,{id:"option3",variant:"light",className:`option-button ${C?"shake":""}`,onClick:()=>S(c[2]),style:{width:"45%",padding:"40px",fontSize:"20px",fontWeight:"600",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"'Spectral SC', serif",backgroundColor:"#e5e5e5",border:"4px solid #ffcc00"},children:c[2]}),e.jsx(h,{id:"option2",variant:"light",className:`option-button ${C?"shake":""}`,onClick:()=>S(c[3]),style:{width:"45%",padding:"40px",fontSize:"20px",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"'Spectral SC', serif",backgroundColor:"#e5e5e5",border:"4px solid #ffcc00"},children:c[3]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{width:"45%",height:"100px",borderRadius:"8px",backgroundColor:"#e5e5e5",animation:"pulse 2s infinite",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"'Spectral SC', serif",color:"#333"},children:[e.jsx("style",{children:`
                                                    @keyframes pulse {
                                                        0% { transform: scale(1); opacity: 0.9; }
                                                        50% { transform: scale(1.02); opacity: 1; }
                                                        100% { transform: scale(1); opacity: 0.9; }
                                                    }
                                                    `}),e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{marginBottom:"8px"},children:[e.jsx("path",{d:"M16 10C16 8.93913 15.5786 7.92172 14.8284 7.17157C14.0783 6.42143 13.0609 6 12 6C10.9391 6 9.92172 6.42143 9.17157 7.17157C8.42143 7.92172 8 8.93913 8 10V11H7V10C7 8.67392 7.52678 7.40215 8.46447 6.46447C9.40215 5.52678 10.6739 5 12 5C13.3261 5 14.5979 5.52678 15.5355 6.46447C16.4732 7.40215 17 8.67392 17 10V11H16V10Z",fill:"#333"}),e.jsx("path",{d:"M19 11H5C4.73478 11 4.48043 11.1054 4.29289 11.2929C4.10536 11.4804 4 11.7348 4 12V20C4 20.2652 4.10536 20.5196 4.29289 20.7071C4.48043 20.8946 4.73478 21 5 21H19C19.2652 21 19.5196 20.8946 19.7071 20.7071C19.8946 20.5196 20 20.2652 20 20V12C20 11.7348 19.8946 11.4804 19.7071 11.2929C19.5196 11.1054 19.2652 11 19 11ZM5 12H19V20H5V12Z",fill:"#333"}),e.jsx("path",{d:"M12 14C12.5523 14 13 14.4477 13 15V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V15C11 14.4477 11.4477 14 12 14Z",fill:"#333"})]})]}),e.jsxs("div",{style:{width:"45%",height:"100px",borderRadius:"8px",backgroundColor:"#e5e5e5",animation:"pulse 2s infinite",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"'Spectral SC', serif",color:"#333"},children:[e.jsx("style",{children:`
                                                    @keyframes pulse {
                                                        0% { transform: scale(1); opacity: 0.9; }
                                                        50% { transform: scale(1.02); opacity: 1; }
                                                        100% { transform: scale(1); opacity: 0.9; }
                                                    }
                                                    `}),e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{marginBottom:"8px"},children:[e.jsx("path",{d:"M16 10C16 8.93913 15.5786 7.92172 14.8284 7.17157C14.0783 6.42143 13.0609 6 12 6C10.9391 6 9.92172 6.42143 9.17157 7.17157C8.42143 7.92172 8 8.93913 8 10V11H7V10C7 8.67392 7.52678 7.40215 8.46447 6.46447C9.40215 5.52678 10.6739 5 12 5C13.3261 5 14.5979 5.52678 15.5355 6.46447C16.4732 7.40215 17 8.67392 17 10V11H16V10Z",fill:"#333"}),e.jsx("path",{d:"M19 11H5C4.73478 11 4.48043 11.1054 4.29289 11.2929C4.10536 11.4804 4 11.7348 4 12V20C4 20.2652 4.10536 20.5196 4.29289 20.7071C4.48043 20.8946 4.73478 21 5 21H19C19.2652 21 19.5196 20.8946 19.7071 20.7071C19.8946 20.5196 20 20.2652 20 20V12C20 11.7348 19.8946 11.4804 19.7071 11.2929C19.5196 11.1054 19.2652 11 19 11ZM5 12H19V20H5V12Z",fill:"#333"}),e.jsx("path",{d:"M12 14C12.5523 14 13 14.4477 13 15V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V15C11 14.4477 11.4477 14 12 14Z",fill:"#333"})]})]}),e.jsxs("div",{style:{width:"45%",height:"100px",borderRadius:"8px",backgroundColor:"#e5e5e5",animation:"pulse 2s infinite",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"'Spectral SC', serif",color:"#333"},children:[e.jsx("style",{children:`
                                                    @keyframes pulse {
                                                        0% { transform: scale(1); opacity: 0.9; }
                                                        50% { transform: scale(1.02); opacity: 1; }
                                                        100% { transform: scale(1); opacity: 0.9; }
                                                    }
                                                    `}),e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{marginBottom:"8px"},children:[e.jsx("path",{d:"M16 10C16 8.93913 15.5786 7.92172 14.8284 7.17157C14.0783 6.42143 13.0609 6 12 6C10.9391 6 9.92172 6.42143 9.17157 7.17157C8.42143 7.92172 8 8.93913 8 10V11H7V10C7 8.67392 7.52678 7.40215 8.46447 6.46447C9.40215 5.52678 10.6739 5 12 5C13.3261 5 14.5979 5.52678 15.5355 6.46447C16.4732 7.40215 17 8.67392 17 10V11H16V10Z",fill:"#333"}),e.jsx("path",{d:"M19 11H5C4.73478 11 4.48043 11.1054 4.29289 11.2929C4.10536 11.4804 4 11.7348 4 12V20C4 20.2652 4.10536 20.5196 4.29289 20.7071C4.48043 20.8946 4.73478 21 5 21H19C19.2652 21 19.5196 20.8946 19.7071 20.7071C19.8946 20.5196 20 20.2652 20 20V12C20 11.7348 19.8946 11.4804 19.7071 11.2929C19.5196 11.1054 19.2652 11 19 11ZM5 12H19V20H5V12Z",fill:"#333"}),e.jsx("path",{d:"M12 14C12.5523 14 13 14.4477 13 15V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V15C11 14.4477 11.4477 14 12 14Z",fill:"#333"})]})]}),e.jsxs("div",{style:{width:"45%",height:"100px",borderRadius:"8px",backgroundColor:"#e5e5e5",animation:"pulse 2s infinite",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"'Spectral SC', serif",color:"#333"},children:[e.jsx("style",{children:`
                                                    @keyframes pulse {
                                                        0% { transform: scale(1); opacity: 0.9; }
                                                        50% { transform: scale(1.02); opacity: 1; }
                                                        100% { transform: scale(1); opacity: 0.9; }
                                                    }
                                                    `}),e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{marginBottom:"8px"},children:[e.jsx("path",{d:"M16 10C16 8.93913 15.5786 7.92172 14.8284 7.17157C14.0783 6.42143 13.0609 6 12 6C10.9391 6 9.92172 6.42143 9.17157 7.17157C8.42143 7.92172 8 8.93913 8 10V11H7V10C7 8.67392 7.52678 7.40215 8.46447 6.46447C9.40215 5.52678 10.6739 5 12 5C13.3261 5 14.5979 5.52678 15.5355 6.46447C16.4732 7.40215 17 8.67392 17 10V11H16V10Z",fill:"#333"}),e.jsx("path",{d:"M19 11H5C4.73478 11 4.48043 11.1054 4.29289 11.2929C4.10536 11.4804 4 11.7348 4 12V20C4 20.2652 4.10536 20.5196 4.29289 20.7071C4.48043 20.8946 4.73478 21 5 21H19C19.2652 21 19.5196 20.8946 19.7071 20.7071C19.8946 20.5196 20 20.2652 20 20V12C20 11.7348 19.8946 11.4804 19.7071 11.2929C19.5196 11.1054 19.2652 11 19 11ZM5 12H19V20H5V12Z",fill:"#333"}),e.jsx("path",{d:"M12 14C12.5523 14 13 14.4477 13 15V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V15C11 14.4477 11.4477 14 12 14Z",fill:"#333"})]})]})]})}),P&&p&&i==="star"&&e.jsx("div",{className:"fade-in",style:{color:"#ffffff",fontSize:"16px",textAlign:"center"},children:L})]})]})})]}),!p&&e.jsxs("div",{style:{width:"100%",maxWidth:"500px",marginTop:"20px"},children:[e.jsx(h,{className:"w-100 mb-30",onClick:z,style:{cursor:"pointer",backgroundColor:"#d22f26",color:"white",border:"none",borderRadius:"5px",padding:"10px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px",border:"1px solid #ffc107",boxShadow:"rgba(75, 76, 78, 0.3) 0px 6px 24px"},children:"Yes — Become My STAR Now"}),R&&e.jsx("div",{className:"error",style:{color:"red",marginTop:"8px",fontSize:"14px",textAlign:"center",marginBottom:"30px"},children:R})]})]})},ne=O.memo(_);export{ne as L};
