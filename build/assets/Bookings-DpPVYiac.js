import{r as i,u as N,d as A,aP as x,j as t,aN as B}from"./index-c7sYi7Kz.js";import{T as L,a as w,b as D}from"./helper-yccaclmR.js";import{S as E}from"./starbannar-2-C_i2LHtT.js";const U=()=>{const[d,c]=i.useState([]),h=N(),{user:a}=A(e=>e.auth),[m,j]=i.useState("All"),[l,g]=i.useState("date"),[p,C]=i.useState("asc"),[u,y]=i.useState("asc"),v=e=>{w(e==null?void 0:e.date),D(),h(`/join/${e.title.split(" ").join("-")}`)},S=async e=>{window.confirm("Are you sure you want to cancel this session?")&&(await B(e.id,{shouldAdd:!1,customId:a==null?void 0:a._id}),x(a==null?void 0:a._id).then(s=>{c(s.data)}).catch(s=>{throw console.error("Error in getUserMeetings:",s),s}))};return i.useEffect(()=>{x(a==null?void 0:a._id).then(e=>{c(e.data)}).catch(e=>{throw console.error("Error in getUserMeetings:",e),e})},[]),t.jsxs("section",{className:"mid-section",style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[t.jsx("img",{src:E,alt:"Star Banner",style:{width:"100%",objectFit:"cover",marginBottom:"16px"}}),t.jsxs("div",{className:"meetings-container-light",children:[t.jsx("h4",{children:"My Bookings"}),t.jsx("div",{className:"meeting-navigation",onClick:()=>{h("/booking-checkout")},children:"View Available Sessions"}),t.jsxs("div",{className:"meetings-list",children:[t.jsxs("div",{className:"meeting-item-light",children:[t.jsx("div",{className:"dropdown-toggle meeting-link","data-bs-toggle":"dropdown",style:{width:"25%",cursor:"pointer",fontSize:"10px",padding:"0px",backgroundColor:"#ffffff"},children:"Language"}),t.jsx("ul",{className:"dropdown-menu",style:{cursor:"pointer",fontSize:"10px",padding:"6px",maxHeight:"200px",overflowY:"auto",backgroundColor:"#ffffff"},children:L.map(e=>t.jsx("li",{style:{padding:"6px"},onClick:()=>{j(e)},children:e},e))}),t.jsxs("div",{style:{width:"30%",cursor:"pointer"},onClick:()=>{y(e=>e==="asc"?"desc":"asc"),g("date")},children:["Date"," ",l!=="date"?"":u==="asc"?"▲":"▼"]}),t.jsxs("div",{style:{width:"30%",cursor:"pointer"},onClick:()=>{C(e=>e==="asc"?"desc":"asc"),g("host")},children:["Host"," ",l!=="host"?"":p==="asc"?"▲":"▼"]}),t.jsx("div",{style:{width:"15%"},children:"Action"})]}),d.length?d.filter(e=>e.language&&e.language.toLowerCase()===m.toLowerCase()||m==="All").sort((e,s)=>{var n,f;if(l==="date"){const r=new Date(e.date),o=new Date(s.date);return u==="asc"?r-o:o-r}else if(l==="host"){const r=((n=e.host)==null?void 0:n.toLowerCase())||"",o=((f=s.host)==null?void 0:f.toLowerCase())||"";return p==="asc"?r.localeCompare(o):o.localeCompare(r)}return 0}).map(e=>{var n;const s=w(e==null?void 0:e.date);return t.jsxs("div",{className:"meeting-item-light",children:[t.jsx("div",{style:{width:"25%"},children:e.language||"English"}),t.jsxs("div",{style:{width:"30%"},children:[s.date," ",s.time]}),t.jsx("div",{style:{width:"30%"},children:((n=e==null?void 0:e.host)==null?void 0:n.slice(0,5))||"Admin"}),t.jsx("div",{className:"dropdown-toggle meeting-link","data-bs-toggle":"dropdown",style:{width:"15%",cursor:"pointer",textAlign:"center",justifyContent:"center",fontSize:"10px",padding:"6px",backgroundColor:"#ffffff"},children:"View"}),t.jsxs("ul",{className:"dropdown-menu",style:{cursor:"pointer",fontSize:"10px",padding:"6px"},children:[t.jsx("li",{style:{padding:"6px"},onClick:()=>{v(e)},children:"Join Session"}),t.jsx("li",{style:{padding:"6px"},onClick:()=>{S(e)},children:"Cancel Session"})]})]},e._id)}):t.jsx("div",{className:"meeting-item-light",style:{justifyContent:"center"},children:"No Bookings Available"})]})]})]})};export{U as default};
